webpackJsonp([1],{"+n9b":function(t,e){t.exports={entries:[{score:1,term:"nucellar epidermis",parentTerm:"megasporangium exothecium",resultAnnotations:[{property:"http://www.w3.org/2000/01/rdf-schema#label",value:"nucellar epidermis"},{property:"http://www.geneontology.org/formats/oboInOwl#hasExactSynonym",value:"珠心 表皮 (Japanese, exact)"},{property:"http://www.geneontology.org/formats/oboInOwl#hasDbXref",value:"Gramene:Anuradha_Pujar"},{property:"http://www.geneontology.org/formats/oboInOwl#hasSynonymType",value:""},{property:"http://www.geneontology.org/formats/oboInOwl#hasDbXref",value:"NIG:Yukiko_Yamazaki"},{property:"http://www.geneontology.org/formats/oboInOwl#hasSynonymType",value:""},{property:"http://purl.obolibrary.org/obo/IAO_0000115",value:"A portion of plant tissue that is the morphologically distinct outer layer of the nucellus."},{property:"http://www.geneontology.org/formats/oboInOwl#hasDbXref",value:"POC:Maria_Alejandra_Gandolfo"},{property:"http://www.geneontology.org/formats/oboInOwl#inSubset",value:""},{property:"http://www.geneontology.org/formats/oboInOwl#hasExactSynonym",value:"epidermis nucelar (Spanish, exact)"},{property:"http://www.geneontology.org/formats/oboInOwl#inSubset",value:""},{property:"http://www.geneontology.org/formats/oboInOwl#hasOBONamespace",value:"plant_anatomy"},{property:"http://www.geneontology.org/formats/oboInOwl#hasExactSynonym",value:"portion of nucellar epidermis (exact)"},{property:"http://www.geneontology.org/formats/oboInOwl#id",value:"PO:0008006"}]}]}},0:function(t,e){},"7zck":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i=a("mvHQ"),o=a.n(i),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-tabs",{attrs:{color:"blue",dark:"","slider-color":"yellow"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._l(t.$store.state.tab_list,function(e,s){return a("v-tab",{key:s,attrs:{color:"black",ripple:""},on:{dblclick:function(e){t.editTab(s)},click:function(e){t.changeTab(s)}}},[t._v("\n      "+t._s(e)+"\n    ")])}),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"indigo"},on:{click:function(e){t.editTab(-1)}}},[t._v("New Tab")])],2),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.editDlg,callback:function(e){t.editDlg=e},expression:"editDlg"}},[a("v-card",[a("v-card-title",[t._v("\n        "+t._s(this.modalName)+"\n      ")]),t._v(" "),a("v-card-text",[a("v-text-field",{attrs:{placeholder:"Input Taxon Name"},model:{value:t.new_name,callback:function(e){t.new_name=e},expression:"new_name"}})],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){e.stopPropagation(),t.saveName()}}},[t._v("Save")]),t._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){e.stopPropagation(),t.editDlg=!1}}},[t._v("Close")])],1)],1)],1)],1)},staticRenderFns:[]},n=a("VU/8")({name:"Taxon",data:function(){return{active:null,editDlg:!1,newDlg:!1,modalName:"",new_name:"",current_index:""}},mounted:function(){},methods:{editTab:function(t){-1!=t?(this.new_name=this.$store.state.tab_list[t],this.current_index=t,this.modalName="Change Tab Name",this.editDlg=!0):(this.new_name="",this.current_index=t,this.modalName="New Tab Name",this.editDlg=!0)},saveName:function(){var t=this;if(-1==this.current_index)this.$store.state.tab_list.push(this.new_name),this.$store.state.text_array.push(""),this.$parent.logActivity(1,"New Name:"+this.new_name);else{var e=this.$store.state.tab_list[this.current_index];if(this.$store.state.item_list.forEach(function(a,s){a.hasOwnProperty(e)&&(a[t.new_name]=a[e],delete a[e])}),this.$store.state.tab_list[this.current_index]=this.new_name,this.$store.state.embeds_data.hasOwnProperty(e)){var a=this.$store.state.embeds_data[e];delete this.$store.state.embeds_data[e],this.$store.state.embeds_data[this.new_name]=a}this.$parent.logActivity(2,"New Name:"+this.new_name,"Old Name:"+e)}this.editDlg=!1,this.$parent.$refs.table_view.refreshTable()},changeTab:function(t){this.$store.state.active_tab=t}}},r,!1,null,null,null).exports,l={name:"DataTable",data:function(){return{text:"Hello World!",headers_array:[],item_array:[]}},methods:{refreshTable:function(){var t=[{text:"Name",value:"name",sortable:!1}];this.$store.state.tab_list.forEach(function(e){var a={text:e,value:e,sortable:!1};t.push(a)}),this.headers_array=t,this.item_array=this.$store.state.item_list},highlight_word:function(t){if(t)for(var e=document.getElementsByTagName("td"),a=0;a<e.length;a++)e[a].textContent.toLowerCase().includes(t.toLowerCase())&&(this.$store.state.table_highlights.push(e[a]),this.highlight_cell(e[a],t))},erase_highlight:function(){this.$store.state.table_highlights.forEach(function(t){t.firstChild.firstChild.innerHTML=t.firstChild.firstChild.innerText}),this.$store.state.table_highlights.length=0,this.$parent.erase_highlight()},highlight_cell:function(t,e){var a=t.innerText,s=a.toLowerCase().search(e.toLowerCase()),i=a.substring(0,s),o="<span class='highlight'> "+a.substring(s,s+e.length)+"</span>",r=a.substring(s+e.length,a.length);t.firstChild.firstChild.innerHTML=i+o+r},highlight_text:function(t){if(t.preventDefault(),""!=window.getSelection().toString()){var e=this.GetWordByPos(window.getSelection().anchorNode.textContent,window.getSelection().focusOffset);this.erase_highlight(),this.highlight_word(e),this.$parent.highlight_word(e)}},GetWordByPos:function(t,e){var a=t.substring(0,e),s=t.substring(e);return(a=a.replace(/^.+ /g,""))+(s=s.replace(/ .+$/g,""))},keyup_event:function(t){window.getSelection().focusNode.parentNode.className.includes("highlight")?window.getSelection().focusNode.parentNode.parentNode.textContent!=t&&(window.getSelection().focusNode.parentNode.parentNode.className+=" changed-cell"):window.getSelection().focusNode.parentNode.textContent!=t&&(window.getSelection().focusNode.parentNode.className+=" changed-cell")},keydown_event:function(t){t.preventDefault(),t.srcElement.contentEditable=!1},toggle_edit:function(t){t.preventDefault(),t.srcElement.contentEditable=!0}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{ref:"table_node",staticClass:"elevation-1",attrs:{headers:t.headers_array,items:t.item_array,"hide-actions":"",id:"table_viewID"},scopedSlots:t._u([{key:"items",fn:function(e){return t._l(t.headers_array,function(s){return a("td",{key:s.value,staticClass:"text-xs-left",attrs:{contenteditable:"true"},on:{click:t.highlight_text,keyup:function(a){t.keyup_event(e.item[s.value])}}},[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(e.item[s.value]))]),t._v(" "),a("span",[t._v(t._s(e.item[s.value]))])])],1)})}}])},[a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n      Sorry, nothing to display here :(\n    ")])],1)],2)},staticRenderFns:[]},c=a("VU/8")(l,h,!1,null,null,null).exports,u=a("aYpo"),d=a("k+2T"),_=a.n(d),m=a("+n9b"),v=a.n(m),p=a("Sazm"),g=a.n(p),b=a("ohtA"),f=a.n(b),$={name:"Main",data:function(){return{customToolbar:[["bold","italic",{color:[]},{size:["small",!1,"large","huge"]}]],approveMenu:{posX:0,posY:0,show:!1,menuItem:[],dom:null},searchMenu:{search_term:"",parent:"",score:"",searching_icon:!0,quizInfo:null,posX:0,posY:0,show:!1,menuItem:[],dom:null},submitDlg:{show:!1,term:"",parentTerm:"",definition:"",sentence:"",author:"",relatedTaxon:"",quizInfo:null},snackbar:{show:!1,msg:""},editor:null,embedData:{}}},beforeCreate:function(){},mounted:function(){var t=this;this.restore_data(),this.editor=this.$refs.rich_edit.quill,this.editor.on("selection-change",function(e,a,s){var i=window.getSelection();if(t.$refs.table_view.erase_highlight(),"STRONG"==i.focusNode.parentNode.nodeName){var o=i.focusNode.nodeValue;t.$refs.table_view.highlight_word(o)}}),this.$store.state.active_tab,t.$refs.table_view.refreshTable()},components:{"taxon-tab":n,"table-view":c,"rich-text":u.VueEditor},methods:{getIndicesOf:function(t,e,a){var s=t.length;if(0==s)return[];var i,o=0;for(a||(e=e.toLowerCase(),t=t.toLowerCase());(i=e.indexOf(t,o))>-1;){var r={pos:i,len:t.length};this.$store.state.editor_highlights.push(r),o=i+s}},highlight_word:function(t){var e=this;this.erase_highlight();var a=this.editor.getText().toLowerCase();this.getIndicesOf(t,a);this.$store.state.editor_highlights.forEach(function(t){e.editor.formatText(t.pos,t.len,{"background-color":"yellowgreen",color:"blue"},!0)})},erase_highlight:function(){var t=this;this.$store.state.editor_highlights.forEach(function(e){t.editor.formatText(e.pos,e.len,{"background-color":"white",color:"black"},!0)}),this.$store.state.editor_highlights=[]},parseOntologyId:function(t){var e=t,a=e.indexOf("["),s=e.indexOf("]"),i=e.substring(a+1,s),o=i.indexOf(":"),r=i.substring(0,o),n=i.indexOf("/"),l=i.substring(o+1,n),h=i.lastIndexOf(":");return{search_term:r,matching_parent_term:l,matching_term_label:i.substring(n+1,h),matching_value:i.substring(h+1,i.length)}},matricize:function(){var t,e=this,a=this.editor.getText();this.$http.get("http://shark.sbs.arizona.edu:8080/parse?sentence="+encodeURI(a)).then(function(a){t=_.a;t.statements.forEach(function(t){t.biologicalEntities.forEach(function(t){var a=t;e.$store.state.ontology_index_list[t.name]={name:t.name,approved:null,nameOrigin:t.name_original,ontology:null},t.hasOwnProperty("ontologyid")&&(e.$store.state.ontology_index_list[t.name].ontology=e.parseOntologyId(t.ontologyid)),t.hasOwnProperty("character")&&t.character.forEach(function(t){var s,i=a.name+" "+t.name;t.hasOwnProperty("ontologyid")?e.$store.state.item_ontology_info_list.hasOwnProperty(i)?e.$store.state.item_ontology_info_list[i][e.$store.state.tab_list[e.$store.state.active_tab]]=e.parseOntologyId(t.ontologyid):((s={})[e.$store.state.tab_list[e.$store.state.active_tab]]=e.parseOntologyId(t.ontologyid),e.$store.state.item_ontology_info_list[i]=s):e.$store.state.item_ontology_info_list.hasOwnProperty(i)?e.$store.state.item_ontology_info_list[i][e.$store.state.tab_list[e.$store.state.active_tab]]={search_term:t.value}:((s={})[e.$store.state.tab_list[e.$store.state.active_tab]]={search_term:t.value},e.$store.state.item_ontology_info_list[i]=s);e.$store.state.item_index_list.hasOwnProperty(i)?e.$store.state.item_list.forEach(function(a){a.name==i&&(a[e.$store.state.tab_list[e.$store.state.active_tab]]=t.value)}):(e.$store.state.item_index_list[i]=i,(s={name:i})[e.$store.state.tab_list[e.$store.state.active_tab]]=t.value,e.$store.state.item_list.push(s))})})}),e.$refs.table_view.refreshTable(),e.setTextStyles(),e.logActivity(3,e.$store.state.tab_list[e.$store.state.active_tab])})},setTextStyles:function(){for(var t=this.editor.getText().toLowerCase(),e=document.getElementsByTagName("img"),a=e.length-1;a>=0;a--)if('<img src="/static/quiz_mark.jpg">'==e[a].outerHTML){var s=f.a.find(e[a]),i=this.editor.getIndex(s);this.editor.deleteText(i,1),0}for(var o in this.$store.state.embeds_data={},this.$store.state.ontology_index_list){-1!=(n=t.search(o))&&(this.editor.formatText(n,o.length,"bold",!0),null!=this.$store.state.ontology_index_list[o].ontology&&1==this.$store.state.ontology_index_list[o].ontology.matching_value&&this.editor.formatText(n,o.length,"color","lightgreen"))}for(var o in this.$store.state.item_ontology_info_list){var r=this.$store.state.item_ontology_info_list[o];if(r.hasOwnProperty(this.$store.state.tab_list[this.$store.state.active_tab]))if(r[this.$store.state.tab_list[this.$store.state.active_tab]].hasOwnProperty("matching_value")){-1!=(n=t.search(r[this.$store.state.tab_list[this.$store.state.active_tab]].search_term))&&(null==r[this.$store.state.tab_list[this.$store.state.active_tab]].approved?1==r[this.$store.state.tab_list[this.$store.state.active_tab]].matching_value&&this.editor.formatText(n,r[this.$store.state.tab_list[this.$store.state.active_tab]].search_term.length,"color","lightgreen"):r[this.$store.state.tab_list[this.$store.state.active_tab]].approved?this.editor.formatText(n,r[this.$store.state.tab_list[this.$store.state.active_tab]].search_term.length,"color","darkgreen"):this.editor.formatText(n,r[this.$store.state.tab_list[this.$store.state.active_tab]].search_term.length,"color","orange"))}else{var n,l=r[this.$store.state.tab_list[this.$store.state.active_tab]].search_term.toString(),h=r[this.$store.state.tab_list[this.$store.state.active_tab]].matching_parent_term;if(-1!=(n=this.editor.getText().toLowerCase().search(l))){var c=0;for(var u in this.$store.state.embeds_data[this.$store.state.tab_list[this.$store.state.active_tab]])"undefined"!=u&&Number(u)<n&&c++;var d=0;for(var u in this.$store.state.embeds_data[this.$store.state.tab_list[this.$store.state.active_tab]])"undefined"!=u&&this.$store.state.embeds_data[this.$store.state.tab_list[this.$store.state.active_tab]][u].text_index==n&&d++;if(0==d){var _=c+n+l.length,m=this.editor.insertEmbed(_,"image","/static/quiz_mark.jpg");this.$store.state.embeds_data.hasOwnProperty(this.$store.state.tab_list[this.$store.state.active_tab])||(this.$store.state.embeds_data[this.$store.state.tab_list[this.$store.state.active_tab]]={}),this.$store.state.embeds_data[this.$store.state.tab_list[this.$store.state.active_tab]][_.toString()]={search_term:l,parent_term:h,text_index:n,delta:m,item_key:o}}this.editor.update()}}}this.$refs.table_view.refreshTable()},save_data:function(){g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/tab_list").set({data:o()(this.$store.state.tab_list)}),g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/item_list").set({data:o()(this.$store.state.item_list)}),g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/item_ontology_info_list").set({data:o()(this.$store.state.item_ontology_info_list)}),g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/json_api_result").set({data:o()(this.$store.state.json_api_result)}),g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/text_array").set({data:o()(this.$store.state.text_array)}),g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/item_index_list").set({data:o()(this.$store.state.item_index_list)}),g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/ontology_index_list").set({data:o()(this.$store.state.ontology_index_list)}),g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/embeds_data").set({data:o()(this.$store.state.embeds_data)}),this.snackbar.msg="Saved successfully",this.snackbar.show=!0,this.logActivity(9,"")},restore_data:function(){var t=this;g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/tab_list").on("value",function(e){e.exists()&&(t.$store.state.tab_list=JSON.parse(e.val().data))}),g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/item_list").on("value",function(e){e.exists()&&(t.$store.state.item_list=JSON.parse(e.val().data))}),g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/item_ontology_info_list").on("value",function(e){e.exists()&&(t.$store.state.item_ontology_info_list=JSON.parse(e.val().data))}),g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/json_api_result").on("value",function(e){e.exists()&&(t.$store.state.json_api_result=JSON.parse(e.val().data))}),g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/text_array").on("value",function(e){e.exists()&&(t.$store.state.text_array=JSON.parse(e.val().data))}),g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/item_index_list").on("value",function(e){e.exists()&&(t.$store.state.item_index_list=JSON.parse(e.val().data))}),g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/ontology_index_list").on("value",function(e){e.exists()&&(t.$store.state.ontology_index_list=JSON.parse(e.val().data))}),g.a.database().ref("users/"+g.a.auth().currentUser.uid+"/embeds_data").on("value",function(e){e.exists()&&(t.$store.state.embeds_data=JSON.parse(e.val().data),t.$refs.table_view.refreshTable())})},showMenu:function(t){var e=this;if("IMG"==t.srcElement.tagName){var a=f.a.find(t.target);console.log(a);var s=this.editor.getIndex(a);console.log(s);var i=this.$store.state.embeds_data[this.$store.state.tab_list[this.$store.state.active_tab]][s];if(console.log(i),void 0!=i)this.searchMenu.quizInfo=i,this.searchMenu.search_term=i.search_term;else{var o=a.prev.text,r=o.substring(o.lastIndexOf(" "),o.length);console.log(a.prev),this.searchMenu.quizInfo={search_term:r,parent_term:"",text_index:this.editor.getIndex(a.prev)+o.lastIndexOf(" "),delta:a},this.searchMenu.search_term=r}this.searchMenu.embedIndex=s,this.searchMenu.show=!1,this.searchMenu.posX=t.clientX,this.searchMenu.posY=t.clientY,this.$nextTick(function(){e.searchMenu.show=!0,e.$http.get("http://shark.sbs.arizona.edu:8080/CAREX/search?term="+encodeURI(e.searchMenu.search_term)).then(function(t){e.logActivity(6,"Term:"+e.searchMenu.search_term,"Tab name:"+e.$store.state.tab_list[e.$store.state.active_tab]),e.searchMenu.searching_icon=!1;var a=v.a.entries[0];e.searchMenu.parent=a.parentTerm,e.searchMenu.score=a.score,a.resultAnnotations.forEach(function(t){e.searchMenu.menuItem.push({title:t.value})})})})}else if("lightgreen"==t.srcElement.style.color){var n=t.srcElement.textContent.toLowerCase();if(this.approveMenu.dom=t.srcElement,"STRONG"==t.srcElement.tagName){if(this.$store.state.ontology_index_list.hasOwnProperty(n)&&this.$store.state.ontology_index_list[n].ontology.search_term==n){var l=this.$store.state.ontology_index_list[n].ontology;this.approveMenu.menuItem=[],this.approveMenu.menuItem=[{title:"Search Term:"+this.$store.state.ontology_index_list[n].ontology.search_term},{title:"Matching Parent Term:"+this.$store.state.ontology_index_list[n].ontology.matching_parent_term},{title:"Matching Term Label:"+this.$store.state.ontology_index_list[n].ontology.matching_term_label},{title:"Matching Value:"+this.$store.state.ontology_index_list[n].ontology.matching_value}]}}else for(var h in this.$store.state.item_ontology_info_list){var c=this.$store.state.item_ontology_info_list[h];if(c.hasOwnProperty(this.$store.state.tab_list[this.$store.state.active_tab])&&c[this.$store.state.tab_list[this.$store.state.active_tab]].search_term==n){l=c[this.$store.state.tab_list[this.$store.state.active_tab]];this.approveMenu.menuItem=[],this.approveMenu.menuItem=[{title:"Search Term:"+l.search_term},{title:"Matching Parent Term:"+l.matching_parent_term},{title:"Matching Term Label:"+l.matching_term_label},{title:"Matching Value:"+l.matching_value}]}}this.approveMenu.show=!1,this.approveMenu.posX=t.clientX,this.approveMenu.posY=t.clientY,this.$nextTick(function(){e.approveMenu.show=!0})}t.preventDefault()},approveItem:function(){this.approveMenu.dom.style.color="darkgreen",this.logActivity(4,"Term:"+this.approveMenu.dom.textContent,"Tab name:"+this.$store.state.tab_list[this.$store.state.active_tab]),this.approveMenu.dom=null,this.approveMenu.show=!1},disapproveItem:function(){this.approveMenu.dom.style.color="orange",this.logActivity(5,"Term:"+this.approveMenu.dom.textContent,"Tab name:"+this.$store.state.tab_list[this.$store.state.active_tab]),this.approveMenu.dom=null,this.approveMenu.show=!1},newTermDlg:function(){console.log("new Term"),this.searchMenu.show=!1,this.submitDlg.term=this.searchMenu.search_term,this.submitDlg.author=g.a.auth().currentUser.email,this.submitDlg.show=!0},submitTerm:function(){var t=this;if(""==this.submitDlg.term||""==this.submitDlg.author||""==this.submitDlg.definition||""==this.submitDlg.sentence)return this.snackbar.msg="Input valid values!",void(this.snackbar.show=!0);var e={term:this.submitDlg.term,parentTerm:this.submitDlg.parentterm,definition:this.submitDlg.definition,setence:this.submitDlg.sentence,author:this.submitDlg.author,relatedTaxon:this.submitDlg.relatedTaxon,submissionTime:Date.now()};this.$http.post("http://shark.sbs.arizona.edu:8080/submit",e).then(function(a){console.log(a),t.snackbar.msg="Submitted successfully",t.snackbar.show=!0,t.logActivity(7,"Term:"+e.term,"Tab name:"+t.$store.state.tab_list[t.$store.state.active_tab]+",ParentTerm:"+e.parentTerm)})},setSearchValue:function(t){var e=this;this.editor.deleteText(this.searchMenu.quizInfo.text_index,this.searchMenu.search_term.length+1);var a=t.length-this.searchMenu.search_term.length-1;if(this.editor.insertText(this.searchMenu.quizInfo.text_index,t,{color:"lightgreen"}),delete this.$store.state.embeds_data[this.$store.state.tab_list[this.$store.state.active_tab]][this.searchMenu.embedIndex],this.$store.state.embeds_data.hasOwnProperty(this.$store.state.tab_list[this.$store.state.active_tab])){this.$store.state.embeds_data[this.$store.state.tab_list[this.$store.state.active_tab]];for(var s in this.$store.state.embeds_data[this.$store.state.tab_list[this.$store.state.active_tab]])if(Number(s)>this.searchMenu.embedIndex){var i=this.$store.state.embeds_data[this.$store.state.tab_list[this.$store.state.active_tab]][s];delete this.$store.state.embeds_data[this.$store.state.tab_list[this.$store.state.active_tab]][s];var o=String(Number(s)+a);this.$store.state.embeds_data[this.$store.state.tab_list[this.$store.state.active_tab]][o]=i,this.$store.state.embeds_data[this.$store.state.tab_list[this.$store.state.active_tab]][o].text_index+=a+1}}for(var s in this.$store.state.item_ontology_info_list){var r=this.$store.state.item_ontology_info_list[s];r.hasOwnProperty(this.$store.state.tab_list[this.$store.state.active_tab])&&r[this.$store.state.tab_list[this.$store.state.active_tab]].search_term==this.searchMenu.search_term&&(r[this.$store.state.tab_list[this.$store.state.active_tab]].search_term=t,r[this.$store.state.tab_list[this.$store.state.active_tab]].matching_parent_term=this.searchMenu.parent,r[this.$store.state.tab_list[this.$store.state.active_tab]].matching_value=t)}if(this.$store.state.item_ontology_info_list.hasOwnProperty(this.searchMenu.quizInfo.item_key)&&this.$store.state.item_ontology_info_list[this.searchMenu.quizInfo.item_key].hasOwnProperty(this.$store.state.tab_list[this.$store.state.active_tab])){var n={search_term:t,matching_parent_term:this.searchMenu.parent,matching_parent_label:"",matching_value:this.searchMenu.score};this.$store.state.item_ontology_info_list[this.searchMenu.quizInfo.item_key][this.$store.state.tab_list[this.$store.state.active_tab]]=n,this.$store.state.item_list.forEach(function(a){a.name==e.searchMenu.quizInfo.item_key&&(a[e.$store.state.tab_list[e.$store.state.active_tab]]=t)})}this.searchMenu.show=!1,this.$refs.table_view.refreshTable(),this.logActivity(10,"Term:"+t,"Tab name:"+this.$store.state.tab_list[this.$store.state.active_tab])},logActivity:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.$http.get("http://shark.sbs.arizona.edu/api/v1/activity_log?user_email"+g.a.auth().currentUser.email+"&type="+t+"&detail="+encodeURI(e)+"&detail_addition="+encodeURI(a)).then(function(t){console.log(t)})}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("taxon-tab",{ref:"taxon_tab"})],1)],1),t._v(" "),a("v-layout",{staticStyle:{height:"calc(100% - 150px)"},attrs:{fluid:""}},[a("v-flex",{attrs:{xs5:"","fill-height":""}},[a("v-layout",{attrs:{row:""}},[a("v-alert",{staticStyle:{height:"42px",width:"100%"},attrs:{value:!0,outline:"",type:"success"}},[t._v("\n          Edit a template to produce new description\n        ")]),t._v(" "),a("v-btn",{attrs:{color:"gray"},on:{click:function(e){t.matricize()}}},[t._v("Matricize")]),t._v(" "),a("v-btn",{attrs:{color:"white"},on:{click:function(e){t.save_data()}}},[t._v("Save")])],1),t._v(" "),a("v-layout",{attrs:{xs12:"","fill-height":""}},[a("v-flex",{attrs:{xs12:""}},[a("div",{staticStyle:{height:"100%"},on:{contextmenu:t.showMenu}},[a("rich-text",{ref:"rich_edit",staticStyle:{height:"100%"},attrs:{disabled:-1==t.$store.state.active_tab,editorToolbar:t.customToolbar,id:"editor_viewID",placeholder:"Please select Tab and Edit description"},model:{value:t.$store.state.text_array[t.$store.state.active_tab],callback:function(e){t.$set(t.$store.state.text_array,t.$store.state.active_tab,e)},expression:"$store.state.text_array[$store.state.active_tab]"}}),t._v(" "),a("v-menu",{attrs:{"position-x":t.approveMenu.posX,"position-y":t.approveMenu.posY,"offset-y":"",absolute:""},model:{value:t.approveMenu.show,callback:function(e){t.$set(t.approveMenu,"show",e)},expression:"approveMenu.show"}},[a("v-list",[t._l(t.approveMenu.menuItem,function(e,s){return a("v-list-tile",{key:s},[a("v-list-tile-title",[t._v(t._s(e.title))])],1)}),t._v(" "),a("v-list-tile",{key:-1},[a("v-btn",{on:{click:function(e){e.stopPropagation(),t.approveItem()}}},[t._v("Approve")]),t._v(" "),a("v-btn",{on:{click:function(e){e.stopPropagation(),t.disapproveItem()}}},[t._v("Disapprove")])],1)],2)],1),t._v(" "),a("v-menu",{attrs:{"position-x":t.searchMenu.posX,"position-y":t.searchMenu.posY,"offset-y":"",absolute:""},model:{value:t.searchMenu.show,callback:function(e){t.$set(t.searchMenu,"show",e)},expression:"searchMenu.show"}},[a("v-list",[a("v-list-tile",{key:-3},[a("v-list-tile-title",[t._v("Search:"+t._s(t.searchMenu.search_term))])],1),t._v(" "),t.searchMenu.searching_icon?a("v-list-tile",{key:-2,attrs:{"align-center":""}},[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:"/static/loading.gif"}})]):t._e(),t._v(" "),t._l(t.searchMenu.menuItem,function(e,s){return a("v-list-tile",{key:s,on:{click:function(a){a.stopPropagation(),t.setSearchValue(e.title)}}},[a("v-list-tile-content",[t._v(t._s(e.title))])],1)}),t._v(" "),a("v-list-tile",{key:-1},[a("v-btn",{on:{click:function(e){e.stopPropagation(),t.newTermDlg()}}},[t._v("New term")])],1)],2)],1)],1),t._v(" "),a("v-snackbar",{attrs:{timeout:3e3,top:!0},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v("\n            "+t._s(t.snackbar.msg)+"\n            "),a("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(e){t.snackbar.show=!1}}},[t._v("Close")])],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.submitDlg.show,callback:function(e){t.$set(t.submitDlg,"show",e)},expression:"submitDlg.show"}},[a("v-card",[a("v-card-title",[t._v("\n                Submit\n              ")]),t._v(" "),a("v-card-text",[a("v-text-field",{attrs:{placeholder:"Input Term Name"},model:{value:t.submitDlg.term,callback:function(e){t.$set(t.submitDlg,"term",e)},expression:"submitDlg.term"}}),t._v(" "),a("v-text-field",{attrs:{placeholder:"Input Parent Term Name"},model:{value:t.submitDlg.parentTerm,callback:function(e){t.$set(t.submitDlg,"parentTerm",e)},expression:"submitDlg.parentTerm"}}),t._v(" "),a("v-text-field",{attrs:{placeholder:"Input Definition"},model:{value:t.submitDlg.definition,callback:function(e){t.$set(t.submitDlg,"definition",e)},expression:"submitDlg.definition"}}),t._v(" "),a("v-text-field",{attrs:{placeholder:"Input Sentence"},model:{value:t.submitDlg.sentence,callback:function(e){t.$set(t.submitDlg,"sentence",e)},expression:"submitDlg.sentence"}}),t._v(" "),a("v-text-field",{attrs:{placeholder:"Input Author Name"},model:{value:t.submitDlg.author,callback:function(e){t.$set(t.submitDlg,"author",e)},expression:"submitDlg.author"}}),t._v(" "),a("v-text-field",{attrs:{placeholder:"Input Related Taxon"},model:{value:t.submitDlg.relatedTaxon,callback:function(e){t.$set(t.submitDlg,"relatedTaxon",e)},expression:"submitDlg.relatedTaxon"}})],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){e.stopPropagation(),t.submitTerm()}}},[t._v("Submit")]),t._v(" "),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){e.stopPropagation(),t.submitDlg.show=!1}}},[t._v("Cancel")])],1)],1)],1)],1)],1)],1),t._v(" "),a("v-flex",{attrs:{xs7:"","fill-height":""}},[a("keep-alive",[a("table-view",{ref:"table_view"})],1)],1)],1)],1)},staticRenderFns:[]},w=a("VU/8")($,y,!1,null,null,null).exports,x={name:"App",data:function(){return{name:"Paul",logged_in:!1,email:"",password:"",auth_id:""}},props:{source:String},components:{Main:w},methods:{onSignOut:function(){this.$store.state.logged_in=!1,this.$root.user=null,g.a.auth().signOut().then(function(){})},onLogin:function(){var t=this;g.a.auth(),g.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(e){t.$http.get("http://shark.sbs.arizona.edu/api/v1/activity_log?user_email="+e.email+"&type=8&detail="+e.email).then(function(t){console.log(t)})}).catch(function(t){alert(t.message)})},onSignUp:function(){g.a.auth(),g.a.auth().createUserWithEmailAndPassword(this.email,this.password).catch(function(t){alert(t.message)})},ExportTableToExcel:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=document.getElementById(t).outerHTML.replace(/ /g,"%20");if(a=a?a+".xls":"excel_data.xls",e=document.createElement("a"),document.body.appendChild(e),navigator.msSaveOrOpenBlob){var i=new Blob(["\ufeff",s],{type:"application/vnd.ms-excel"});navigator.msSaveOrOpenBlob(i,a)}else e.href="data:application/vnd.ms-excel, "+s,e.download=a,e.click()},Export2Doc:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>Export HTML To Doc</title></head><body>"+document.getElementById(t).innerHTML+"</body></html>",s=new Blob(["\ufeff",a],{type:"application/msword"}),i="data:application/vnd.ms-word;charset=utf-8,"+encodeURIComponent(a);e=e?e+".doc":"document.doc";var o=document.createElement("a");document.body.appendChild(o),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(s,e):(o.href=i,o.download=e,o.click()),document.body.removeChild(o)}},mounted:function(){var t=this;g.a.auth().onAuthStateChanged(function(e){e?(t.auth_id=e.uid,t.$store.state.auth_id=e.uid,t.$store.state.logged_in=!0):(t.auth_id=null,t.$store.state.auth_id=null,t.$store.state.logged_in=!1)})}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[t.$store.state.logged_in?a("v-toolbar",{attrs:{color:"indigo",dark:"",fixed:"",app:"","clipped-right":""}},[a("v-toolbar-title",[t._v("Vue Organism")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue"},on:{click:t.onSignOut}},[t._v("SignOut")]),t._v(" "),a("v-btn",{attrs:{color:"blue"},on:{click:function(e){e.stopPropagation(),t.Export2Doc("editor_viewID","doc_description")}}},[t._v("Export as *.doc")]),t._v(" "),a("v-btn",{attrs:{color:"blue"},on:{click:function(e){e.stopPropagation(),t.ExportTableToExcel("table_viewID","excel_table")}}},[t._v("Export as *.xlsx")])],1):t._e(),t._v(" "),0==t.$store.state.logged_in?a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Login")]),t._v(" "),a("v-spacer")],1),t._v(" "),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{"prepend-icon":"person",name:"login",label:"Login",type:"text"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),a("v-text-field",{attrs:{id:"password","prepend-icon":"lock",name:"password",label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:t.onLogin}},[t._v("SignIn")]),t._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:t.onSignUp}},[t._v("SignUp")])],1)],1)],1)],1)],1)],1):1==t.$store.state.logged_in?a("v-content",[a("Main",{ref:"mainComp"})],1):t._e()],1)},staticRenderFns:[]},k=a("VU/8")(x,T,!1,null,null,null).exports,M=a("/ocq"),O=a("3EgV"),I=a.n(O);s.a.use(M.a),s.a.use(I.a);var S=new M.a({routes:[{path:"/",name:"Main",component:w}]});S.beforeEach(function(t,e,a){var s=g.a.auth().currentUser;console.log(s),t.matched.some(function(t){return t.meta.requiresAuth})?s?a():(console.log("no-currentUser"),a({path:"/",query:{redirect:t.fullPath}})):t.matched.some(function(t){return t.meta.requiresGuest})?s?a():(console.log("no currentUser"),a({path:"/",query:{redirect:t.fullPath}})):a()});var D=a("NYxO");s.a.use(D.a);var N=new D.a.Store({state:{counter:0,logged_in:null,auth_id:-1,tab_list:[],item_list:[],item_ontology_info_list:{},json_api_result:[],text_array:[],item_index_list:{},ontology_index_list:{},active_tab:-1,table_highlights:[],editor_highlights:[],embeds_data:{}}}),E=a("8+8L");a("7zck");s.a.use(E.a),s.a.use(I.a),s.a.use(VueFire),s.a.config.productionTip=!1,new s.a({el:"#app",router:S,store:N,components:{App:k},template:"<App/>",created:function(){p.initializeApp({apiKey:"AIzaSyAvOjVb9-SwCFiWGDr1L9_PGz1Ei-1FVDc",authDomain:"author2018-53022.firebaseapp.com",databaseURL:"https://author2018-53022.firebaseio.com",projectId:"author2018-53022",storageBucket:"author2018-53022.appspot.com",messagingSenderId:"515142910133"})}})},"k+2T":function(t,e){t.exports={statements:[{id:"d1_s0",notes:null,provenance:null,text:"Blades red, rounded 3.5 cm. Leaves part of",biologicalEntities:[{character:[{src:"d0_s0",name:"coloration",ontologyid:"http://purl.obolibrary.org/obo/PATO_0000322[red:color/red:1.0];",is_modifier:!1,value:"red"},{src:"d0_s0",name:"shape",is_modifier:!1,value:"rounded"},{unit:"cm",src:"d0_s0",name:"length",value:3.5}],src:"d0_s0",name:"blade",name_original:"blades",ontologyid:"http://purl.obolibrary.org/obo/PO_0025060[blade:cardinalpart of multi-tissue plant structure/laminablade:1.0];",id:"o0",type:"structure"},{src:"d0_s0",name:"leaf",name_original:"leaves",ontologyid:"http://purl.obolibrary.org/obo/PO_0025034[leaf:phyllome/leaf:1.0];",id:"o1",type:"structure"}],relation:{negation:!1,src:"d0_s0",name:"part_of",from:"o0",id:"r0",to:"o1"}}],text:null}}},["NHnr"]);
//# sourceMappingURL=app.e0cadd9a0fb2473186be.js.map